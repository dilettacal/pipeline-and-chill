# =============================================================================
# Pipeline and Chill - Backend Environment Configuration
# =============================================================================
# Copy this file to .env and update the values for your environment
# cp .env.example .env

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
APP_NAME=pipeline-and-chill
APP_VERSION=1.0.0
ENVIRONMENT=development
LOG_LEVEL=INFO
DEBUG=false

# =============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# =============================================================================
# Database connection
DATABASE_URL=postgresql+psycopg://pipeline_user:your_password@localhost:5432/pipeline_chill
DB_HOST=localhost
DB_PORT=5432
DB_NAME=pipeline_chill
DB_USER=pipeline_user
DB_PASSWORD=your_password
DB_SSL_MODE=prefer

# Connection pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Database schemas
DB_SCHEMA_RAW=raw_data
DB_SCHEMA_PROCESSED=processed_data
DB_SCHEMA_ANALYTICS=analytics
DB_SCHEMA_METADATA=metadata

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# Redis connection
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=your_redis_password
REDIS_SSL=false

# Redis pool settings
REDIS_POOL_SIZE=50
REDIS_POOL_TIMEOUT=5
REDIS_RETRY_ON_TIMEOUT=true

# Redis use cases
REDIS_CACHE_TTL=3600
REDIS_SESSION_TTL=86400
REDIS_RATE_LIMIT_WINDOW=60

# =============================================================================
# KAFKA CONFIGURATION
# =============================================================================
# Kafka connection
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_SECURITY_PROTOCOL=PLAINTEXT
KAFKA_SASL_MECHANISM=PLAIN
KAFKA_SASL_USERNAME=your_kafka_username
KAFKA_SASL_PASSWORD=your_kafka_password

# Producer settings
KAFKA_ACKS=all
KAFKA_RETRIES=3
KAFKA_BATCH_SIZE=16384
KAFKA_LINGER_MS=5
KAFKA_BUFFER_MEMORY=33554432

# Consumer settings
KAFKA_AUTO_OFFSET_RESET=earliest
KAFKA_ENABLE_AUTO_COMMIT=true
KAFKA_AUTO_COMMIT_INTERVAL_MS=1000
KAFKA_SESSION_TIMEOUT_MS=30000
KAFKA_MAX_POLL_RECORDS=100
KAFKA_MAX_POLL_INTERVAL_MS=300000

# Kafka topics
KAFKA_TOPIC_RAW_EVENTS=raw-events
KAFKA_TOPIC_PROCESSED_EVENTS=processed-events
KAFKA_TOPIC_ANALYTICS_EVENTS=analytics-events
KAFKA_TOPIC_ERRORS=error-events

# Consumer groups
KAFKA_CONSUMER_GROUP_EVENT_PROCESSOR=event-processor-group
KAFKA_CONSUMER_GROUP_ANALYTICS=analytics-processor-group

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# Hash salt for data anonymization and security
HASH_SALT=your-super-secret-hash-salt-change-this-in-production

# JWT settings (if using authentication)
JWT_SECRET_KEY=your-jwt-secret-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# API security
API_KEY_HEADER=X-API-Key
API_RATE_LIMIT_PER_MINUTE=100

# =============================================================================
# DATA PATHS CONFIGURATION
# =============================================================================
# Root data directory
DATA_ROOT_PATH=/data

# Raw data paths
RAW_DATA_PATH=/data/raw
RAW_DATA_YELLOW_PATH=/data/raw/yellow
RAW_DATA_GREEN_PATH=/data/raw/green
RAW_DATA_FHV_PATH=/data/raw/fhv
RAW_DATA_REFERENCE_PATH=/data/raw/reference

# Curated data paths
CURATED_DATA_PATH=/data/curated
CURATED_DATA_YELLOW_PATH=/data/curated/yellow
CURATED_DATA_GREEN_PATH=/data/curated/green
CURATED_DATA_FHV_PATH=/data/curated/fhv
CURATED_DATA_ANALYTICS_PATH=/data/curated/analytics

# Processed data paths
PROCESSED_DATA_PATH=/data/processed
PROCESSED_DATA_TRIPS_PATH=/data/processed/trips
PROCESSED_DATA_AGGREGATES_PATH=/data/processed/aggregates

# Archive paths
ARCHIVE_PATH=/data/archive
BACKUP_PATH=/data/backup

# =============================================================================
# MONITORING AND OBSERVABILITY
# =============================================================================
# Prometheus metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_ENDPOINT=/metrics

# Logging
LOG_FORMAT=json
LOG_FILE_PATH=/logs/pipeline-and-chill.log
LOG_ROTATION_SIZE=100MB
LOG_RETENTION_DAYS=30

# Health check
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PORT=8080
HEALTH_CHECK_PATH=/health

# =============================================================================
# JUPYTER NOTEBOOK CONFIGURATION
# =============================================================================
# Jupyter server settings
JUPYTER_HOST=0.0.0.0
JUPYTER_PORT=8888
JUPYTER_TOKEN=your-jupyter-token
JUPYTER_PASSWORD=your-jupyter-password
JUPYTER_ALLOW_ROOT=true

# Notebook paths
NOTEBOOKS_PATH=/notebooks
NOTEBOOKS_DATA_PATH=/notebooks/data
NOTEBOOKS_ANALYSIS_PATH=/notebooks/analysis
NOTEBOOKS_MODELS_PATH=/notebooks/models

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================
# AWS S3 (if using cloud storage)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-east-1
S3_BUCKET_NAME=pipeline-and-chill-data

# External APIs
EXTERNAL_API_BASE_URL=https://api.example.com
EXTERNAL_API_KEY=your-external-api-key
EXTERNAL_API_TIMEOUT=30

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================
# Development mode
DEV_MODE=true
HOT_RELOAD=true
DEBUG_TOOLBAR=true

# Testing
TEST_DATABASE_URL=postgresql+psycopg://test_user:test_password@localhost:5432/pipeline_chill_test
TEST_REDIS_URL=redis://localhost:6379/1
TEST_KAFKA_BOOTSTRAP_SERVERS=localhost:9092

# =============================================================================
# PRODUCTION OVERRIDES
# =============================================================================
# Uncomment and configure for production deployment
# ENVIRONMENT=production
# DEBUG=false
# LOG_LEVEL=WARNING
# DB_SSL_MODE=require
# REDIS_SSL=true
# KAFKA_SECURITY_PROTOCOL=SASL_SSL
# HASH_SALT=your-production-hash-salt
# JWT_SECRET_KEY=your-production-jwt-secret
